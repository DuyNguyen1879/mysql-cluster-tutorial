

============================================
MySQL Cluster Installation and Configuration
============================================

Installation
============

Download and install binaries
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Binaries can be downloaded from `MySQL website<http://dev.mysql.com/downloads/cluster/>`_ ::

  shell> cd /usr/local
  shell> wget http://dev.mysql.com/get/Downloads/MySQL-Cluster-7.2/mysql-cluster-gpl-7.2.10-linux2.6-i686.tar.gz/from/http://cdn.mysql.com/ -O mysql-cluster-gpl-7.2.10-linux2.6-i686.tar.gz
  shell> tar -zxf mysql-cluster-gpl-7.2.10-linux2.6-i686.tar.gz
  shell> ln -s mysql-cluster-gpl-7.2.10-linux2.6-i686 mysql

Create user/group
~~~~~~~~~~~~~~~~~ 
Create the user/group mysql/mysql on the hosts where miysqld will be running::

  shell> useradd mysql


Prepare the config file
~~~~~~~~~~~~~~~~~~~~~~~

The *global configuration file* for MySQL Cluster is an INI format file named *config.ini* divided in sections.

Sections in config.ini are:

* **[computer]** : defines cluster hosts;

* **[ndbd]** : defines data node processes;

* **[mysqld]** or **[api]** : defines API nodes;

* **[mgm]** or **[ndb_mgmd]** : defines management nodes;

* **[tcp]** : defines TCP/IP connections between nodes;

It is possible (and recommended) to define default values for each section in the form of **[** *section* **default]** . Examples:

* [tcp default]

* [ndb_mgmd default]

* [ndbd default]



Basic example of global configuration file
------------------------------------------
Below is listed a very simple config.ini file::

	[ndbd default]
	NoOfReplicas=2
	DataDir=/var/lib/mysql-cluster

	[ndb_mgmd]
	Hostname=mgmd1.example.com
	DataDir/var/lib/mysql-cluster

	[ndbd]
	HostName=ndbd1.example.com

	[ndbd]
	HostName=ndbd2.example.com

	[mysqld]
	[mysqld]
	[mysqld]



Second example of global configuration file
------------------------------------------
Below is listed a bit more complex config.ini file::

	[TCP DEFAULT]
	SendBufferMemory=2M
	ReceiveBufferMemory=2M

	[NDB_MGMD DEFAULT]
	PortNumber=1186
	Datadir=/mysqlcluster/

	[NDB_MGMD]
	NodeId=1
	Hostname=192.168.1.201
	LogDestination=FILE:filename=ndb_1_cluster.log,maxsize=10000000,maxfiles=6

	[NDBD DEFAULT]
	NoOfReplicas=2
	DataMemory=80M
	IndexMemory=15M
	LockPagesInMainMemory=1
	Datadir=/mysqlcluster/

	MaxNoOfConcurrentOperations=1000
	MaxNoOfConcurrentTransactions=1024

	StringMemory=25
	MaxNoOfTables=1024
	MaxNoOfOrderedIndexes=256
	MaxNoOfUniqueHashIndexes=64
	MaxNoOfAttributes=2560
	MaxNoOfTriggers=2560

	FragmentLogFileSize=16M
	InitFragmentLogFiles=FULL
	NoOfFragmentLogFiles=5
	RedoBuffer=8M

	TimeBetweenGlobalCheckpoints=1000
	DiskCheckpointSpeedInRestart=20M
	DiskCheckpointSpeed=4M
	TimeBetweenLocalCheckpoints=20
	CompressedLCP=1

	HeartbeatIntervalDbDb=15000
	HeartbeatIntervalDbApi=15000

	BackupMaxWriteSize=1M
	BackupDataBufferSize=12M
	BackupLogBufferSize=8M
	BackupMemory=20M
	CompressedBackup=1

	SharedGlobalMemory=10M
	DiskPageBufferMemory=32M

	[NDBD]
	NodeId=3
	Hostname=192.168.1.203

	[NDBD]
	NodeId=4
	Hostname=192.168.1.204
